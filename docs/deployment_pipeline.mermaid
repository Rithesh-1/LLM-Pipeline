flowchart TD
    %% Entry Point
    Start([ğŸš€ Start Deployment]) --> Deploy_CLI[ğŸ› ï¸ deploy_local.py<br/>Deployment CLI]

    %% Deployment Options
    Deploy_CLI --> Deployment_Choice{ğŸ¯ Choose Deployment}
    
    Deployment_Choice -->|Local| Local_Deploy[ğŸ–¥ï¸ Local Deployment<br/>Free Alternative to SageMaker]
    Deployment_Choice -->|Cloud| HF_Deploy[â˜ï¸ HuggingFace Spaces<br/>Free Cloud Hosting]

    %% Local Deployment Flow
    subgraph Local_Deployment ["ğŸ–¥ï¸ Local Deployment Pipeline"]
        Local_Start[ğŸ¬ Initialize Local Server]
        Local_Start --> Load_Model[ğŸ¤— Load Model<br/>HuggingFace Transformers]
        Load_Model --> Setup_FastAPI[âš¡ Setup FastAPI Server<br/>REST API Endpoints]
        Setup_FastAPI --> Memory_Opt[ğŸ§  Memory Optimization<br/>8-bit/4-bit Quantization]
        Memory_Opt --> Health_Check[â¤ï¸ Health Check Endpoint<br/>/health, /model-info]
        Health_Check --> Local_Ready[âœ… Local Server Ready<br/>http://localhost:8000]
    end

    %% HuggingFace Spaces Deployment Flow
    subgraph HF_Deployment ["â˜ï¸ HuggingFace Spaces Pipeline"]
        HF_Start[ğŸ¬ Initialize HF Space]
        HF_Start --> Create_Space[ğŸ—ï¸ Create Space<br/>CPU-Basic (Free Tier)]
        Create_Space --> Generate_App[ğŸ“ Generate app.py<br/>Gradio Interface]
        Generate_App --> Upload_Files[ğŸ“¤ Upload Files<br/>app.py, requirements.txt]
        Upload_Files --> HF_Build[ğŸ”¨ Build & Deploy<br/>Automatic Deployment]
        HF_Build --> HF_Ready[âœ… Space Ready<br/>https://huggingface.co/spaces/...]
    end

    %% Connect deployment choices
    Local_Deploy --> Local_Deployment
    HF_Deploy --> HF_Deployment

    %% Model Sources
    Model_Registry[ğŸ¤— HuggingFace Hub<br/>Model Registry] 
    Model_Registry --> Load_Model
    Model_Registry --> Generate_App

    %% Deployment Management
    subgraph Management ["ğŸ›ï¸ Deployment Management"]
        Status_Check[ğŸ“Š Status Monitoring<br/>Health & Performance]
        Config_Save[ğŸ’¾ Save Configuration<br/>deployment.json]
        Lifecycle[ğŸ”„ Lifecycle Management<br/>Start/Stop/Delete]
    end

    Local_Ready --> Management
    HF_Ready --> Management

    %% User Interfaces
    subgraph Interfaces ["ğŸŒ User Interfaces"]
        FastAPI_UI[ğŸ”— FastAPI Endpoints<br/>REST API]
        Gradio_UI[ğŸ¨ Gradio Interface<br/>Interactive Web UI]
        Swagger_UI[ğŸ“š Swagger Documentation<br/>API Documentation]
    end

    Local_Ready --> FastAPI_UI
    Local_Ready --> Swagger_UI
    HF_Ready --> Gradio_UI

    %% Cost Comparison
    subgraph Cost_Comparison ["ğŸ’° Cost Comparison"]
        AWS_Cost[ğŸ’¸ AWS SageMaker<br/>$200-500/month]
        Local_Cost[ğŸ’š Local Deployment<br/>$0/month]
        HF_Cost[ğŸ’š HuggingFace Spaces<br/>$0/month (Free Tier)]
    end

    %% Testing & Validation
    subgraph Testing ["ğŸ§ª Testing & Validation"]
        Inference_Test[ğŸ” Inference Testing<br/>Test Endpoints]
        Load_Test[âš¡ Load Testing<br/>Performance Validation]
        Health_Monitor[â¤ï¸ Health Monitoring<br/>Continuous Checks]
    end

    Management --> Testing
    Interfaces --> Inference_Test

    %% Success States
    Local_Ready --> Success_Local[âœ… Local Deployment Success<br/>Ready for Inference]
    HF_Ready --> Success_HF[âœ… HF Spaces Success<br/>Public Access Available]

    %% Styling
    classDef freeAlternative fill:#e8f5e8,stroke:#2e7d32,stroke-width:3px
    classDef expensiveOption fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef userInterface fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef managementTool fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef successState fill:#e8f5e8,stroke:#388e3c,stroke-width:2px

    class Local_Deploy,HF_Deploy,Local_Cost,HF_Cost freeAlternative
    class AWS_Cost expensiveOption
    class FastAPI_UI,Gradio_UI,Swagger_UI userInterface
    class Status_Check,Config_Save,Lifecycle managementTool
    class Success_Local,Success_HF successState
